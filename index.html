<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');
        
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .mobile-padding {
                padding: 1rem !important;
            }
            
            .mobile-text {
                font-size: 0.875rem !important;
            }
            
            .mobile-button {
                padding: 0.5rem 0.75rem !important;
                font-size: 0.75rem !important;
                min-width: auto !important;
            }
            
            .mobile-video {
                height: 250px !important;
            }

            .mobile-controls {
                gap: 0.25rem !important;
            }

            .mobile-grid {
                grid-template-columns: 1fr !important;
            }
        }

        /* Touch-friendly controls */
        @media (hover: none) and (pointer: coarse) {
            .control-btn {
                min-height: 44px;
                min-width: 44px;
                touch-action: manipulation;
            }
        }
        
        .video-container {
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .control-btn {
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .playlist-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .playlist-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateX(-5px);
        }
        
        .playlist-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 50%, #4facfe 100%);
        }
        
        .glass-effect {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .video-player {
            width: 100%;
            height: 400px;
            border-radius: 15px;
            background: #000;
        }

        @media (max-width: 768px) {
            .video-player {
                height: 250px;
            }
        }

        .status-message {
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            text-align: center;
            font-weight: 600;
        }

        .status-success {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .status-info {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
        }

        .loading::after {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff40;
            border-top: 2px solid #fff;
            border-radius: 50%;
            margin-left: 10px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-2 sm:px-4 py-4 sm:py-8">
        <!-- Header -->
        <div class="text-center mb-4 sm:mb-8 mobile-padding">
            <h1 class="text-2xl sm:text-4xl font-bold text-white mb-2 sm:mb-4">ğŸ¬ Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</h1>
            <p class="text-white/80 text-sm sm:text-lg mobile-text">Ø´ØºÙ„ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Teams ÙˆØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ø£Ø®Ø±Ù‰ Ø¨Ø³Ù‡ÙˆÙ„Ø©</p>
        </div>

        <div class="grid mobile-grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-8">
            <!-- Video Player Section -->
            <div class="lg:col-span-2">
                <div class="video-container p-3 sm:p-6 mobile-padding">
                    <!-- URL Input -->
                    <div class="mb-4 sm:mb-6">
                        <label class="block text-white font-semibold mb-2 sm:mb-3 mobile-text">ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ:</label>
                        <div class="flex flex-col sm:flex-row gap-2 sm:gap-3">
                            <input 
                                type="url" 
                                id="videoUrl" 
                                placeholder="Ø§Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù‡Ù†Ø§..."
                                class="flex-1 px-3 sm:px-4 py-2 sm:py-3 rounded-xl glass-effect text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50 mobile-text"
                            >
                            <button 
                                onclick="loadVideo()" 
                                class="control-btn px-4 sm:px-6 py-2 sm:py-3 rounded-xl text-white font-semibold mobile-button"
                            >
                                ØªØ´ØºÙŠÙ„
                            </button>
                        </div>
                    </div>

                    <!-- Quick Links -->
                    <div class="mb-4 flex flex-wrap gap-2">
                        <button onclick="loadDemoVideo('youtube')" class="control-btn px-3 py-1 rounded-lg text-white text-xs">
                            Ù…Ø«Ø§Ù„ YouTube
                        </button>
                        <button onclick="loadDemoVideo('mp4')" class="control-btn px-3 py-1 rounded-lg text-white text-xs">
                            Ù…Ø«Ø§Ù„ MP4
                        </button>
                        <button onclick="loadDemoVideo('vimeo')" class="control-btn px-3 py-1 rounded-lg text-white text-xs">
                            Ù…Ø«Ø§Ù„ Vimeo
                        </button>
                    </div>

                    <!-- Status Messages -->
                    <div id="statusMessage" style="display: none;"></div>

                    <!-- Video Player -->
                    <div class="mb-4 sm:mb-6">
                        <div id="videoContainer" class="bg-black rounded-xl overflow-hidden">
                            <video 
                                id="videoPlayer" 
                                class="video-player" 
                                controls 
                                preload="metadata"
                                style="display: none;"
                                crossorigin="anonymous"
                            >
                                Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
                            </video>
                            
                            <iframe 
                                id="embedPlayer" 
                                class="video-player" 
                                frameborder="0" 
                                allowfullscreen
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                style="display: none;"
                            ></iframe>

                            <div id="loadingMessage" class="video-player loading" style="display: none;">
                                Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...
                            </div>

                            <div id="placeholderMessage" class="video-player flex items-center justify-center text-white/60">
                                <div class="text-center">
                                    <div class="text-4xl mb-4">ğŸ“¹</div>
                                    <p class="mobile-text">Ø§Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙˆØ§Ø¶ØºØ· ØªØ´ØºÙŠÙ„</p>
                                    <p class="mobile-text text-sm mt-2 opacity-70">Ø£Ùˆ Ø¬Ø±Ø¨ Ø§Ù„Ø£Ù…Ø«Ù„Ø© Ø£Ø¹Ù„Ø§Ù‡</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Video Info -->
                    <div id="videoInfo" style="display: none;" class="mb-4 p-3 glass-effect rounded-xl text-white">
                        <h4 class="font-semibold mb-2">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ:</h4>
                        <div id="videoDetails"></div>
                    </div>

                    <!-- Video Controls -->
                    <div class="flex flex-wrap mobile-controls gap-2 sm:gap-3 justify-center">
                        <button onclick="playPause()" class="control-btn px-3 sm:px-4 py-2 rounded-lg text-white mobile-button">
                            â¯ï¸ ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù
                        </button>
                        <button onclick="changeVolume(-0.1)" class="control-btn px-3 sm:px-4 py-2 rounded-lg text-white mobile-button">
                            ğŸ”‰ Ø®ÙØ¶ Ø§Ù„ØµÙˆØª
                        </button>
                        <button onclick="changeVolume(0.1)" class="control-btn px-3 sm:px-4 py-2 rounded-lg text-white mobile-button">
                            ğŸ”Š Ø±ÙØ¹ Ø§Ù„ØµÙˆØª
                        </button>
                        <button onclick="toggleFullscreen()" class="control-btn px-3 sm:px-4 py-2 rounded-lg text-white mobile-button">
                            ğŸ”³ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©
                        </button>
                        <button onclick="downloadVideo()" class="control-btn px-3 sm:px-4 py-2 rounded-lg text-white mobile-button">
                            ğŸ“¥ ØªØ­Ù…ÙŠÙ„
                        </button>
                        <button onclick="copyVideoUrl()" class="control-btn px-3 sm:px-4 py-2 rounded-lg text-white mobile-button">
                            ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·
                        </button>
                    </div>
                </div>
            </div>

            <!-- Playlist Section -->
            <div class="lg:col-span-1">
                <div class="glass-effect rounded-xl p-3 sm:p-6 mobile-padding">
                    <h3 class="text-white font-bold text-lg sm:text-xl mb-3 sm:mb-4 mobile-text">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ´ØºÙŠÙ„</h3>
                    
                    <!-- Add to Playlist -->
                    <div class="mb-4">
                        <input 
                            type="text" 
                            id="playlistTitle" 
                            placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙÙŠØ¯ÙŠÙˆ..."
                            class="w-full px-3 py-2 rounded-lg glass-effect text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50 mb-2 mobile-text"
                        >
                        <button 
                            onclick="addToPlaylist()" 
                            class="w-full control-btn py-2 rounded-lg text-white font-semibold mobile-button"
                        >
                            â• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
                        </button>
                    </div>

                    <!-- Playlist Items -->
                    <div id="playlistContainer" class="space-y-2">
                        <div class="text-white/60 text-center py-4 mobile-text">
                            Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                        </div>
                    </div>

                    <!-- Clear Playlist -->
                    <button 
                        onclick="clearPlaylist()" 
                        class="w-full mt-4 control-btn py-2 rounded-lg text-white font-semibold mobile-button"
                    >
                        ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
                    </button>
                </div>

                <!-- Supported Formats -->
                <div class="glass-effect rounded-xl p-3 sm:p-6 mt-4 mobile-padding">
                    <h3 class="text-white font-bold text-lg mb-3 mobile-text">âœ… Ø§Ù„Ù…Ù†ØµØ§Øª Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©</h3>
                    <ul class="text-white/80 space-y-1 mobile-text">
                        <li>â€¢ YouTube (ØªØ¶Ù…ÙŠÙ† + ØªØ­Ù…ÙŠÙ„) âœ…</li>
                        <li>â€¢ Vimeo (ØªØ¶Ù…ÙŠÙ† + ØªØ­Ù…ÙŠÙ„) âœ…</li>
                        <li>â€¢ Ù…Ù„ÙØ§Øª MP4 Ù…Ø¨Ø§Ø´Ø±Ø© âœ…</li>
                        <li>â€¢ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© âœ…</li>
                        <li>â€¢ Microsoft Teams (Ù…Ø­Ø¯ÙˆØ¯) âš ï¸</li>
                        <li>â€¢ Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± âœ…</li>
                    </ul>
                    
                    <div class="mt-4 p-3 bg-white/10 rounded-lg">
                        <h4 class="text-white font-semibold mb-2 mobile-text">ğŸ’¡ Ù†ØµØ§Ø¦Ø­</h4>
                        <ul class="text-white/70 text-xs space-y-1">
                            <li>â€¢ Ø§Ø³ØªØ®Ø¯Ù… Ø±ÙˆØ§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„ÙÙŠØ¯ÙŠÙˆ</li>
                            <li>â€¢ ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ø§Ø¨Ø·</li>
                            <li>â€¢ Ø¬Ø±Ø¨ Ø§Ù„Ø£Ù…Ø«Ù„Ø© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±</li>
                            <li>â€¢ Ø§Ø³ØªØ®Ø¯Ù… Ø®ÙŠØ§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ù„Ø­ÙØ¸</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Use in-memory storage instead of localStorage
        let currentPlaylist = [];
        let currentVideoIndex = -1;

        // Demo videos for testing
        const demoVideos = {
            youtube: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
            mp4: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
            vimeo: 'https://vimeo.com/76979871'
        };

        function loadDemoVideo(type) {
            if (demoVideos[type]) {
                document.getElementById('videoUrl').value = demoVideos[type];
                loadVideo();
            }
        }

        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.className = `status-message status-${type}`;
            statusDiv.textContent = message;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }

        function showLoading(show = true) {
            const loading = document.getElementById('loadingMessage');
            const placeholder = document.getElementById('placeholderMessage');
            
            if (show) {
                loading.style.display = 'flex';
                placeholder.style.display = 'none';
            } else {
                loading.style.display = 'none';
            }
        }

        function hideAllPlayers() {
            document.getElementById('videoPlayer').style.display = 'none';
            document.getElementById('embedPlayer').style.display = 'none';
            document.getElementById('loadingMessage').style.display = 'none';
            document.getElementById('placeholderMessage').style.display = 'none';
        }

        function extractVideoId(url) {
            // YouTube - improved regex
            const youtubeRegex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
            const youtubeMatch = url.match(youtubeRegex);
            if (youtubeMatch) {
                return { type: 'youtube', id: youtubeMatch[1], url: url };
            }

            // Vimeo - improved regex
            const vimeoRegex = /(?:vimeo\.com\/)([0-9]+)/;
            const vimeoMatch = url.match(vimeoRegex);
            if (vimeoMatch) {
                return { type: 'vimeo', id: vimeoMatch[1], url: url };
            }

            // Teams detection
            if (url.includes('teams.microsoft.com') || url.includes('sharepoint.com')) {
                return { type: 'teams', id: url, url: url };
            }

            // Direct video files - improved detection
            if (url.match(/\.(mp4|webm|ogg|mov|avi|m4v|3gp|flv)(\?.*)?$/i)) {
                return { type: 'direct', id: url, url: url };
            }

            // Check if it's an embed URL
            if (url.includes('/embed/') || url.includes('embed')) {
                return { type: 'embed', id: url, url: url };
            }

            return { type: 'unknown', id: url, url: url };
        }

        function updateVideoInfo(videoInfo, success = true) {
            const infoDiv = document.getElementById('videoInfo');
            const detailsDiv = document.getElementById('videoDetails');
            
            if (success) {
                detailsDiv.innerHTML = `
                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${getTypeLabel(videoInfo.type)}</p>
                    <p><strong>Ø§Ù„Ø±Ø§Ø¨Ø·:</strong> <span class="text-sm opacity-80">${videoInfo.url.substring(0, 50)}${videoInfo.url.length > 50 ? '...' : ''}</span></p>
                `;
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
        }

        function getTypeLabel(type) {
            const labels = {
                youtube: 'YouTube',
                vimeo: 'Vimeo', 
                direct: 'Ù…Ù„Ù ÙÙŠØ¯ÙŠÙˆ Ù…Ø¨Ø§Ø´Ø±',
                teams: 'Microsoft Teams',
                embed: 'ÙÙŠØ¯ÙŠÙˆ Ù…Ø¶Ù…Ù†',
                unknown: 'Ù†ÙˆØ¹ ØºÙŠØ± Ù…Ø­Ø¯Ø¯'
            };
            return labels[type] || type;
        }

        async function loadVideo() {
            const urlInput = document.getElementById('videoUrl');
            const url = urlInput.value.trim();
            
            if (!url) {
                showStatus(`ØªÙ… ØªØ´ØºÙŠÙ„: ${item.title}`, 'success');
            }
        }

        function removeFromPlaylist(id) {
            currentPlaylist = currentPlaylist.filter(item => item.id !== id);
            if (currentVideoIndex >= currentPlaylist.length) {
                currentVideoIndex = -1;
            }
            updatePlaylistDisplay();
            showStatus('ØªÙ… Ø­Ø°Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©', 'info');
        }

        function clearPlaylist() {
            if (currentPlaylist.length === 0) {
                showStatus('Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø±ØºØ© Ø¨Ø§Ù„ÙØ¹Ù„', 'info');
                return;
            }
            
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§ØªØŸ')) {
                currentPlaylist = [];
                currentVideoIndex = -1;
                updatePlaylistDisplay();
                showStatus('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„', 'info');
            }
        }

        async function downloadVideo() {
            const urlInput = document.getElementById('videoUrl');
            const url = urlInput.value.trim();
            
            if (!url) {
                showStatus('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }

            const videoInfo = extractVideoId(url);
            showStatus('Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„ØªØ­Ù…ÙŠÙ„...', 'info');
            
            try {
                switch (videoInfo.type) {
                    case 'direct':
                        try {
                            // Create download link for direct videos
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = url.split('/').pop().split('?')[0] || `video_${Date.now()}.mp4`;
                            a.target = '_blank';
                            a.rel = 'noopener noreferrer';
                            
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            
                            showStatus('ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„! ğŸ“¥', 'success');
                        } catch (error) {
                            showStatus('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±', 'error');
                        }
                        break;

                    case 'youtube':
                        // Open YouTube downloader services
                        const youtubeDownloaders = [
                            `https://savefrom.net/#url=${encodeURIComponent(url)}`,
                            `https://www.y2mate.com/youtube/${videoInfo.id}`,
                            `https://yt1s.com/youtube-to-mp4?q=${encodeURIComponent(url)}`
                        ];
                        
                        window.open(youtubeDownloaders[0], '_blank');
                        showStatus('ØªÙ… ÙØªØ­ Ù…ÙˆÙ‚Ø¹ ØªØ­Ù…ÙŠÙ„ YouTube', 'success');
                        
                        setTimeout(() => {
                            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„ØŸ')) {
                                youtubeDownloaders.slice(1).forEach(link => {
                                    setTimeout(() => window.open(link, '_blank'), 500);
                                });
                            }
                        }, 2000);
                        break;

                    case 'vimeo':
                        const vimeoDownloadUrl = `https://vimeodownloader.com/vimeo-video-downloader?url=${encodeURIComponent(url)}`;
                        window.open(vimeoDownloadUrl, '_blank');
                        showStatus('ØªÙ… ÙØªØ­ Ù…ÙˆÙ‚Ø¹ ØªØ­Ù…ÙŠÙ„ Vimeo', 'success');
                        break;

                    case 'teams':
                        showStatus('ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Teams ØªØ­ØªØ§Ø¬ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø®Ø§ØµØ© Ù„Ù„ØªØ­Ù…ÙŠÙ„', 'info');
                        
                        // Try to extract direct URL if possible
                        if (url.includes('sharepoint.com') && url.includes('.mp4')) {
                            try {
                                const directUrl = url.replace('/embed', '').replace('?web=1', '');
                                const a = document.createElement('a');
                                a.href = directUrl;
                                a.download = `teams_video_${Date.now()}.mp4`;
                                a.target = '_blank';
                                
                                document.body.appendChild(a);
                                a.click();
                                document.body.removeChild(a);
                                
                                showStatus('ØªÙ… Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ Teams', 'info');
                            } catch (error) {
                                showStatus('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ù…ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Teams', 'error');
                            }
                        }
                        break;

                    default:
                        // For unknown types, try multiple approaches
                        try {
                            // First try direct download
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = `video_${Date.now()}`;
                            a.target = '_blank';
                            a.rel = 'noopener noreferrer';
                            
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            
                            showStatus('ØªÙ… ÙØªØ­ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ù…ÙŠÙ„', 'success');
                        } catch (error) {
                            // Fallback to generic downloader
                            const genericDownloader = `https://savefrom.net/#url=${encodeURIComponent(url)}`;
                            window.open(genericDownloader, '_blank');
                            showStatus('ØªÙ… ÙØªØ­ Ù…ÙˆÙ‚Ø¹ ØªØ­Ù…ÙŠÙ„ Ø¹Ø§Ù…', 'info');
                        }
                        break;
                }
                
            } catch (error) {
                console.error('Download error:', error);
                showStatus('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„', 'error');
                
                // Final fallback: copy URL to clipboard
                try {
                    navigator.clipboard.writeText(url).then(() => {
                        showStatus('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ù„Ø­Ø§ÙØ¸Ø©', 'info');
                    });
                } catch (clipboardError) {
                    console.error('Clipboard error:', clipboardError);
                    showStatus('Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹', 'error');
                }
            }
        }

        function copyVideoUrl() {
            const urlInput = document.getElementById('videoUrl');
            const url = urlInput.value.trim();
            
            if (!url) {
                showStatus('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø§Ø¨Ø· Ù„Ù„Ù†Ø³Ø®', 'error');
                return;
            }

            try {
                // Modern clipboard API
                if (navigator.clipboard && window.isSecureContext) {
                    navigator.clipboard.writeText(url).then(() => {
                        showStatus('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­! ğŸ“‹', 'success');
                    }).catch(() => {
                        fallbackCopy();
                    });
                } else {
                    fallbackCopy();
                }
            } catch (error) {
                fallbackCopy();
            }

            function fallbackCopy() {
                try {
                    // Fallback for older browsers
                    urlInput.select();
                    urlInput.setSelectionRange(0, 99999); // For mobile devices
                    const successful = document.execCommand('copy');
                    
                    if (successful) {
                        showStatus('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨Ù†Ø¬Ø§Ø­! ğŸ“‹', 'success');
                    } else {
                        showStatus('ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· - Ø§Ø¶ØºØ· Ctrl+C Ù„Ù„Ù†Ø³Ø®', 'info');
                    }
                } catch (error) {
                    showStatus('ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¨Ø· - Ø§Ø¶ØºØ· Ctrl+C Ù„Ù„Ù†Ø³Ø®', 'info');
                }
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Space bar for play/pause (only if not typing in input)
            if (e.code === 'Space' && !['INPUT', 'TEXTAREA'].includes(e.target.tagName)) {
                e.preventDefault();
                playPause();
            }
            
            // F for fullscreen
            if (e.key === 'f' || e.key === 'F') {
                if (!['INPUT', 'TEXTAREA'].includes(e.target.tagName)) {
                    e.preventDefault();
                    toggleFullscreen();
                }
            }
        });

        // Handle Enter key in inputs
        document.getElementById('videoUrl').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                loadVideo();
            }
        });

        document.getElementById('playlistTitle').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                addToPlaylist();
            }
        });

        // Auto-load video when URL is pasted
        document.getElementById('videoUrl').addEventListener('paste', function(e) {
            setTimeout(() => {
                const url = e.target.value.trim();
                if (url && confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ØŸ')) {
                    loadVideo();
                }
            }, 100);
        });

        // Initialize on page load
        window.addEventListener('load', function() {
            updatePlaylistDisplay();
            showStatus('Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ! Ø¬Ø±Ø¨ Ø§Ù„Ø£Ù…Ø«Ù„Ø© Ø£Ùˆ Ø§Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ', 'info');
        });

        // Handle video player events
        document.getElementById('videoPlayer').addEventListener('loadstart', function() {
            showStatus('Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...', 'info');
        });

        document.getElementById('videoPlayer').addEventListener('canplay', function() {
            showStatus('Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªØ´ØºÙŠÙ„', 'success');
        });

        document.getElementById('videoPlayer').addEventListener('error', function(e) {
            console.error('Video error:', e);
            showStatus('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ - ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·', 'error');
            hideAllPlayers();
            document.getElementById('placeholderMessage').style.display = 'flex';
        });

        // Handle embed player load
        document.getElementById('embedPlayer').addEventListener('load', function() {
            showStatus('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø¶Ù…Ù† Ø¨Ù†Ø¬Ø§Ø­', 'success');
        });

        // Responsive design enhancements
        function checkMobile() {
            return window.innerWidth <= 768;
        }

        window.addEventListener('resize', function() {
            // Adjust video player height on resize
            const videoPlayer = document.getElementById('videoPlayer');
            const embedPlayer = document.getElementById('embedPlayer');
            
            if (checkMobile()) {
                videoPlayer.style.height = '250px';
                embedPlayer.style.height = '250px';
            } else {
                videoPlayer.style.height = '400px';
                embedPlayer.style.height = '400px';
            }
        });

        // Prevent context menu on video (optional)
        document.getElementById('videoPlayer').addEventListener('contextmenu', function(e) {
            e.preventDefault();
            showStatus('Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù„Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'info');
        });

    </script>
</body>
</html>('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'error');
                return;
            }

            // Show loading
            showLoading(true);
            showStatus('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...', 'info');

            const videoInfo = extractVideoId(url);
            const videoPlayer = document.getElementById('videoPlayer');
            const embedPlayer = document.getElementById('embedPlayer');

            hideAllPlayers();

            try {
                let success = false;

                switch (videoInfo.type) {
                    case 'youtube':
                        try {
                            const embedUrl = `https://www.youtube.com/embed/${videoInfo.id}?autoplay=0&enablejsapi=1`;
                            embedPlayer.src = embedUrl;
                            embedPlayer.style.display = 'block';
                            success = true;
                            showStatus('ØªÙ… ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ YouTube Ø¨Ù†Ø¬Ø§Ø­', 'success');
                        } catch (error) {
                            throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ YouTube');
                        }
                        break;

                    case 'vimeo':
                        try {
                            const embedUrl = `https://player.vimeo.com/video/${videoInfo.id}?autoplay=0`;
                            embedPlayer.src = embedUrl;
                            embedPlayer.style.display = 'block';
                            success = true;
                            showStatus('ØªÙ… ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ Vimeo Ø¨Ù†Ø¬Ø§Ø­', 'success');
                        } catch (error) {
                            throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ Vimeo');
                        }
                        break;

                    case 'direct':
                        try {
                            videoPlayer.src = url;
                            videoPlayer.style.display = 'block';
                            
                            // Add event listeners for better error handling
                            videoPlayer.onloadstart = () => showStatus('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...', 'info');
                            videoPlayer.oncanplay = () => {
                                showStatus('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                                success = true;
                            };
                            videoPlayer.onerror = () => {
                                showStatus('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ - ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·', 'error');
                                hideAllPlayers();
                                document.getElementById('placeholderMessage').style.display = 'flex';
                            };
                            
                            success = true;
                        } catch (error) {
                            throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±');
                        }
                        break;

                    case 'teams':
                        try {
                            // Try different methods for Teams videos
                            if (url.includes('embed')) {
                                embedPlayer.src = url;
                                embedPlayer.style.display = 'block';
                                success = true;
                                showStatus('ØªÙ… ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ Teams (Ù…Ø¶Ù…Ù†)', 'success');
                            } else {
                                // Try as direct video
                                videoPlayer.src = url;
                                videoPlayer.style.display = 'block';
                                success = true;
                                showStatus('Ø¬Ø§Ø±ÙŠ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ Teams...', 'info');
                            }
                        } catch (error) {
                            throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ÙÙŠØ¯ÙŠÙˆ Teams');
                        }
                        break;

                    case 'embed':
                        try {
                            embedPlayer.src = url;
                            embedPlayer.style.display = 'block';
                            success = true;
                            showStatus('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø¶Ù…Ù†', 'success');
                        } catch (error) {
                            throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ù…Ø¶Ù…Ù†');
                        }
                        break;

                    default:
                        // Try multiple methods for unknown types
                        try {
                            // First try as direct video
                            videoPlayer.src = url;
                            videoPlayer.style.display = 'block';
                            
                            videoPlayer.onerror = () => {
                                // If direct video fails, try as embed
                                videoPlayer.style.display = 'none';
                                try {
                                    embedPlayer.src = url;
                                    embedPlayer.style.display = 'block';
                                    showStatus('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙƒÙ…Ø¶Ù…Ù†', 'info');
                                } catch (embedError) {
                                    showStatus('Ù†ÙˆØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…', 'error');
                                    hideAllPlayers();
                                    document.getElementById('placeholderMessage').style.display = 'flex';
                                }
                            };
                            
                            success = true;
                            showStatus('Ø¬Ø§Ø±ÙŠ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ...', 'info');
                        } catch (error) {
                            throw new Error('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ');
                        }
                        break;
                }

                // Update video info
                updateVideoInfo(videoInfo, success);

            } catch (error) {
                console.error('Video loading error:', error);
                showStatus(error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'error');
                hideAllPlayers();
                document.getElementById('placeholderMessage').style.display = 'flex';
                updateVideoInfo(videoInfo, false);
            } finally {
                showLoading(false);
            }
        }

        function playPause() {
            const videoPlayer = document.getElementById('videoPlayer');
            if (videoPlayer.style.display !== 'none') {
                try {
                    if (videoPlayer.paused) {
                        videoPlayer.play();
                        showStatus('ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'success');
                    } else {
                        videoPlayer.pause();
                        showStatus('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'info');
                    }
                } catch (error) {
                    showStatus('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØªØ´ØºÙŠÙ„', 'error');
                }
            } else {
                showStatus('Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆ Ù„Ù„ØªØ­ÙƒÙ… Ø¨Ù‡', 'error');
            }
        }

        function changeVolume(delta) {
            const videoPlayer = document.getElementById('videoPlayer');
            if (videoPlayer.style.display !== 'none') {
                try {
                    const newVolume = Math.max(0, Math.min(1, videoPlayer.volume + delta));
                    videoPlayer.volume = newVolume;
                    showStatus(`Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª: ${Math.round(newVolume * 100)}%`, 'info');
                } catch (error) {
                    showStatus('Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª', 'error');
                }
            } else {
                showStatus('Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆ Ù„Ù„ØªØ­ÙƒÙ… Ø¨ØµÙˆØªÙ‡', 'error');
            }
        }

        function toggleFullscreen() {
            const videoContainer = document.getElementById('videoContainer');
            try {
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                    showStatus('ØªÙ… Ø¥Ù„ØºØ§Ø¡ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©', 'info');
                } else {
                    videoContainer.requestFullscreen().then(() => {
                        showStatus('ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©', 'success');
                    }).catch(() => {
                        showStatus('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©', 'error');
                    });
                }
            } catch (error) {
                showStatus('ÙˆØ¶Ø¹ Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…', 'error');
            }
        }

        function addToPlaylist() {
            const urlInput = document.getElementById('videoUrl');
            const titleInput = document.getElementById('playlistTitle');
            const url = urlInput.value.trim();
            const title = titleInput.value.trim() || 'ÙÙŠØ¯ÙŠÙˆ Ø¨Ø¯ÙˆÙ† Ø¹Ù†ÙˆØ§Ù†';

            if (!url) {
                showStatus('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }

            const videoItem = {
                id: Date.now(),
                title: title,
                url: url,
                addedAt: new Date().toLocaleString('ar-SA'),
                type: extractVideoId(url).type
            };

            currentPlaylist.push(videoItem);
            titleInput.value = '';
            updatePlaylistDisplay();
            showStatus('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©', 'success');
        }

        function updatePlaylistDisplay() {
            const container = document.getElementById('playlistContainer');
            
            if (currentPlaylist.length === 0) {
                container.innerHTML = '<div class="text-white/60 text-center py-4 mobile-text">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</div>';
                return;
            }

            container.innerHTML = currentPlaylist.map((item, index) => `
                <div class="playlist-item ${index === currentVideoIndex ? 'active' : ''} p-3 rounded-lg" onclick="playFromPlaylist(${index})">
                    <div class="font-semibold mobile-text">${item.title}</div>
                    <div class="text-xs opacity-70 mt-1">${getTypeLabel(item.type)} - ${item.addedAt}</div>
                    <button onclick="removeFromPlaylist(${item.id}); event.stopPropagation();" class="text-red-400 hover:text-red-300 text-xs mt-2">
                        ğŸ—‘ï¸ Ø­Ø°Ù
                    </button>
                </div>
            `).join('');
        }

        function playFromPlaylist(index) {
            const item = currentPlaylist[index];
            if (item) {
                document.getElementById('videoUrl').value = item.url;
                currentVideoIndex = index;
                loadVideo();
                updatePlaylistDisplay();
                showStatus
